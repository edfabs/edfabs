{% extends 'skeleton/base.html' %}

{% block title %}{{tag.name}}{% endblock title %}

{% block content %}
{% load static %}
<div class="container py-4">
	<div class="d-flex align-items-center justify-content-between mb-3">
		<h1 class="mb-0">#{{tag.name}}</h1>
		<a href="{% url 'blog:index' %}" class="text-decoration-none"><i class="bi bi-arrow-left"></i> Volver al blog</a>
	</div>

	<div class="row">
		{% for post in tag_posts %}
		<div class="col-lg-4 col-md-6 mb-4">
			<div class="card h-100 shadow-sm border-0">
				{% if post.header_image %}
					<img src="{{ post.header_image.url }}" class="card-img-top" alt="{{ post.title }}">
				{% endif %}
				<div class="card-body d-flex flex-column">
					<div class="d-flex justify-content-between align-items-start mb-2">
						<span class="badge bg-secondary">{{ post.category }}</span>
						<small class="text-muted">{{ post.created_on|date:"d M Y" }}</small>
					</div>
					<h5 class="card-title"><a href="{% url 'blog:detail' post.slug %}" class="text-decoration-none text-dark">{{ post.title }}</a></h5>
					<p class="text-muted small mb-2">Por {{ post.author.first_name }} {{ post.author.last_name }}</p>
					<p class="card-text mb-3">{{ post.excerpt|safe|truncatechars:160 }}</p>
					<div class="mt-auto d-flex justify-content-between align-items-center">
						<a class="btn btn-outline-primary btn-sm" href="{% url 'blog:detail' post.slug %}">Leer más</a>
						<small class="text-muted">{{ post.total_likes }} ❤️</small>
					</div>
				</div>
			</div>
		</div>
		{% empty %}
			<div class="col">
				<div class="alert alert-info">No hay publicaciones con esta etiqueta.</div>
			</div>
		{% endfor %}
	</div>
</div>
{% endblock content %}
